# NineData SQL窗口工具


本文介绍如何 NineData SQL 窗口来高效管理并访问 Doris 数据源。SQL窗口是使用最简单也最高效的Doris访问方式，通过SQL窗口，你可以进行如下操作：

1. 登录并访问您的Doris数据库，在SQL窗口开发过程中，支持智能提示相关建议及内容，实现极快的导航和研发效率。
2. 查询并管理Doris数据
3. 便捷得创建并变更Doris中的数据表
4. 协同开发，可以跟您团队中的其他成员，高效得进行Doris的数据查询、数据变更协作
5. 数据安全，可以针对Doris中的敏感数据进行自动扫描及动态脱敏，保障数据安全

## SQL窗口登录地址
[https://console.ninedata.cloud/home](https://console.ninedata.cloud/dataQuery/workbench)
## 前提条件
您已注册 NineData 平台账号。更多信息，请参见[注册 NineData 账号](https://docs.ninedata.cloud/quick_start/registration/)。
## 功能介绍
NineData 的 SQL 窗口提供多个便捷功能，帮助您轻松管理您的数据源。

功能  | 功能说明
------------- | -------------
SQL 智能提示 | 在 SQL 窗口中输入 SQL 语句时，根据您输入的语义，系统会自动提示关键字、函数、库表字段名等常规对象信息；除此之外，还提供 SQL 模板（语义结构体）、语法帮助等便捷功能
保存SQL  | 对于常用 SQL，您可以将 SQL 保存至 NineData，保存后的 SQL 也支持查看。且由于 SQL 保存在云端，不受浏览器或主机的限制，您可以随时随地查看并使用保存的 SQL
工作现场保存 | 对于浏览器意外退出或突发宕机等场景，您只需要重新登录 NineData 控制台并打开 SQL 窗口，之前打开的数据源以及执行过的 SQL 命令会被自动加载。由于页面状态保存在云端，不受浏览器或主机的限制，您可以随时随地恢复工作现场。
AI 智能优化 | NineData 内置AI引擎，支持AI智能SQL优化。基于此功能，可以帮助您快速提供 SQL 优化建议。
自然语言访问数据 | "NineData 内置AI引擎，支持自然语言转SQL能力，您可以通过自然语言描述使用数据需求，NineData会自动转化成对应SQL，并根据需要自动执行。

## 使用SQL窗口快速访问Doris


### 步骤一：添加数据源
* 首先登录 [NineData 控制台](https://console.ninedata.cloud/configuration/datasource)
* 在左侧导航栏，单击数据源管理>数据源。
* 按需选择数据源的位置、环境，数据库类型选择 Doris。

![ds_created](/images/ninedata/ds_created.png)


* 全部配置完成后，单击创建数据源右侧的连接测试可以测试该数据源是否可以正常访问，提示连接成功即可单击创建数据源，完成数据源的添加。否则请重新检查连接设置，直到连接测试成功为止。
添加数据源的详细信息，请参见创建数据源。

### 步骤二：使用 SQL 窗口

*   在左侧导航栏单击 SQL 开发>SQL 窗口。如果之前登录过数据源且没有关闭，则会自动进入该数据源页面。
*    单击 SQL 窗口下方文本框，会弹出可用的数据源，单击目标数据源，并单击开始查询，跳转到 SQL 窗口。
如果有多个数据源，您可以在框中输入全部或部分关键词进行精确查找或模糊查找。支持搜索的字段如下：
  - 数据源名称
  - IP 地址
*   打开 SQL 窗口后，即可对数据源执行数据管理操作。如下图所示：

![sql_window](/images/ninedata/sql_window.png)

*  SQL 窗口的详细使用方法，请参见本文附录。
SQL 开发企业版（组织模式）下，如果目标数据源中添加了敏感列，您将无法完整查看敏感列的内容。如需查看，请先申请敏感列权限。
![[sensitive_data]](/images/ninedata/senstive_data.png)

## 附录：SQL 窗口操作介绍

![sql_window_extention](/images/ninedata/sql_window_extention.png)

 序号         | 功能点   | 功能接受  |
--------------------|------------------|-----------------------|
1 | SQL 窗口页签  | 表示当前已打开的数据源 SQL 窗口，多个 SQL 窗口可以通过单击页签切换，单击页签右侧的X可以关闭该 SQL 窗口。右键菜单支持如下操作：<br>  1. 实例详情：打开当前数据源详情窗口 <br> 2. 创建新查询：打开一个新的数据源 SQL 窗口 <br> 3. 关闭窗口：关闭当前页签
2 | 打开数据源  | 选择并打开新的数据源 SQL 窗口
3 | 数据源信息  | 展示当前 SQL 窗口的数据源信息，包含环境、IP 地址以及端口号。右键菜单可进行如下操作：<br> 1.  实例详情：显示当前数据源的详情信息，包含用户名、连接地址、运行时间、连接数等。<br>2. 刷新：刷新数据源信息。
4 | 刷新  | 可刷新当前数据源中的数据
5 | 数据库名称  | 选中目标数据库以执行 SQL 操作
6 | 功能按钮  | 在SQL窗口执行区域提供了如下的操作功能：<br> -  **执行**：执行选中的 SQL 语句 <br> -   **SQL 智能优化**：AI 对光标所在行的 SQL 语句进行智能分析，并给出优化建议 <br> - **设置**：设置结果集的展示方式以及 SQL 窗口的字体大小。<br> &emsp;&emsp;1) 结果集：可选覆盖或追加 <br> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  - 覆盖（默认）：新的结果集将覆盖上一次的执行结果。<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; 追加：生成新的页签展示新的结果集。 <br> &emsp;&emsp;2) 字体大小：拖动滑块调整 SQL 窗口中 SQL 语句的字体大小 <br> -  **更多选项** <br> &emsp;&emsp;1) 格式化：调整选中 SQL 语句的结构，增强可读性 <br> &emsp;&emsp;2)AI 格式化：由 AI 分析并调整选中 SQL 语句的结构，拥有更好的格式化效果。 <br>&emsp;&emsp;3) 执行计划：查看选中 SQL 语句的执行计划。<br>&emsp;&emsp;4)保存 SQL：将当前 SQL 窗口中的所有 SQL 语句保存至 SQL 列表，方便下次使用。 <br>&emsp;&emsp;5)查看 SQL：查看已保存的 SQL，您可以将目标 SQL 插入至当前的 SQL 窗口中。同时可以编辑或删除目标 SQL。 <br>&emsp;&emsp;6)执行历史：查看目标数据源的 SQL 的执行历史。您可以选择日期过滤出某个时间段的执行历史，也可以通过关键词（SQL 语句、数据库名称、错误提示）搜索执行历史。<br>&emsp;&emsp;7)编辑器：切换编辑器模式。<br>&emsp;&emsp;8)AI 智能：切换智能 SQL 模式。更多信息，请参见[自然语言转SQL](https://docs.ninedata.cloud/sqldev/ai_sql)。
7 | 搜索表名  | 可输入表名快速查找目标数据表
8 | 数据库列表  | 显示当前数据源中所有的数据库和数据表。右击数据库可以进行如下操作：<br> - **创建数据库**：右键单击任意数据库，单击创建数据库，在弹出的对话框中，输入库名称、字符集以及对应比较规则，单击确定，可视化创建数据库。<br> - **库详情**：右键单击目标库，单击库详情，即可打开数据库详情页面。您可以在这里查看目标库的详情。<br> - **查询表数据**：右键单击目标表，单击查询表数据，可自动查询该表中的数据，默认返回 100 行。<br> - **表详情**：右键单击目标表，单击表详情，即可打开数据库详情页面。您可以在这里查看目标表中所有的列名、Indexes。<br> - **查询视图**：右键单击目标视图，单击查询视图，可自动查询该视图，默认返回 100 行。<br> - **生成创建脚本**：右键单击目标对象，单击生成创建脚本，即可生成创建的 SQL 语句。<br> - **创建新查询**：右键单击任意对象，单击创建新查询，可以打开新的 SQL 窗口页签。<br> - **刷新**：右键单击任意对象，单击刷新，刷新数据库列表。
9 | SQL编辑器  | 支持如下功能：<br> - SQL 执行：支持单个语句或批量执行。<br>- 中断执行：SQL 执行过程中可以单击停止查询中断 SQL 的执行。<br>- 语法高亮：以不同颜色显示不同语法元素，提高代码的可读性。<br>- SQL 智能提示：输入命令过程中根据您输入的语义自动弹出提示。<br>- 查看 SQL 语法帮助：输入 SQL 关键字后，选中该关键字并单击鼠标右键 > 帮助，即可查看该关键字对应的帮助信息。<br> - SQL 模板：提供 CREATE、SELECT、INSERT、UPDATE、DELETE 等语句的常用模板，您只需要输入前置命令即可选择对应模板。例如：输入 CREATE 即可选择 CREATE TABLE、CREATE VIEW 等模板。<br>- 右键菜单：<br>&emsp;&emsp;1) **执行**：执行光标所在位置的 SQL 语句。<br>&emsp;&emsp; 2)**格式化**：调整选中 SQL 语句的结构，增强可读性。<br>&emsp;&emsp; 3)AI 格式化：AI 智能调整选中 SQL 语句的结构，增强可读性，对比机器格式化有更好的效果。<br>&emsp;&emsp; 4) **SQL 智能优化**： AI 对光标所在行的 SQL 语句进行智能分析，并给出优化建议。常规操作：包括剪切、复制、粘贴和全选。<br> &emsp;&emsp; 5)**选中当前 SQL**：选中光标所在位置的 SQL 语句。<br>&emsp;&emsp; 6)**帮助**：AI 对当前选中的内容进行分析，提供目标 SQL 语法的语义、目标表的表结构定义、SQL 语句逻辑的整体解释等信息。

 

## 相关链接

1.  [通过网关访问 Doris 数据源](https://docs.ninedata.cloud/bp/doris_console)
2.   [  Ninedata 帮助文档](https://docs.ninedata.cloud/)